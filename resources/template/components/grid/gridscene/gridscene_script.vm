	#set($dot = "$")#set($cols = 3)#set($colon ="：")	new biz.button({id:"#query_button", icons: {primary:"ui-icon-search"}});#if(${viewInfo.hasAddOrEdit()})	new biz.button({id:"#addBtn", icons: {primary:'ui-icon-plus'}});	new biz.button({id:"#editBtn", icons: {primary:'ui-icon-pencil'}});#end#if(${viewInfo.hasShow()})	new biz.button({id:"#viewBtn", icons: {primary:'ui-icon-document'}});#end	new biz.button({id:"#deleteBtn", icons: {primary:'ui-icon-trash'}});#if(${viewInfo.hasExport()})	new biz.button({id:"#exportBtn", icons: {primary:'ui-icon-disk'}});#end	//显示或隐藏查询条件    $(document).ready(function(){		$("#displayHidden").click(function(){		       var conditionsDiv = document.getElementById("conditions");		       var displayHidden = document.getElementById("displayHidden");		       if(conditionsDiv.style["display"]=="block"){		          conditionsDiv.style["display"]="none";		          displayHidden.innerHTML="<fmt:message key='query.ExpandCondition'/>";		       }else if(conditionsDiv.style["display"]=="none"){		          conditionsDiv.style["display"]="block";		          displayHidden.innerHTML="<fmt:message key='query.hideCondition'/>";		       }		});	});		var ${viewInfo.getlowerFirstEntityName()}Grid;    window.onload = function(){    	${viewInfo.getlowerFirstEntityName()}Grid = new biz.grid({    		id : "#${viewInfo.getlowerFirstEntityName()}Table",    		url : "<c:url value="/${viewInfo.getlowerFirstEntityName()}/list${viewInfo.getEntityName(false)}"/>",    		page : "<biz:out value='${page.pageNo}' default='1'/>",    		rowNum : "<biz:out value='${page.pageSize}' default='15'/>",			width : "auto",			multiselect : ${viewInfo.multiSelect()},    		pager : "#${viewInfo.getlowerFirstEntityName()}Pager",    		prmNames : {page:"pageNo",rows:"pageSize",sort:"orderFields",order:"order"},    		sortname : "${viewInfo.orderFields}",    		sortorder : "${viewInfo.orders}",    		colModel : [			   {name : "$viewInfo.pkName",hidden:true,key:true}, #set($index = 1)#foreach($resutlField in ${viewInfo.getResultFields()})				{name : "$resutlField.fieldName"#if($index == 1 && ${viewInfo.hasShow()}),formatter:"showlink",formatoptions:{baseLinkUrl:"${viewInfo.getlowerFirstEntityName()}/show"}#end,label:"${viewInfo.getResultFieldDisplayName($resutlField)}"}#if($index < ${viewInfo.resultFieldsLength}),#end#set($index = $index + 1)#end    		],#if(${viewInfo.hasExport()})    		exportParams:{//Excel导出参数配置        		url : "${viewInfo.getEntityName(true)}/exportExcel",				customHeader : {                	title : "${viewInfo.listTitle}"                },                queryColumns :[#set($index = 1)#foreach( $queryField in $viewInfo.getQueryFields())					{name : "${queryField.getFieldName()}", label : "${queryField.getDisplayName()}"}#if($index < ${viewInfo.queryFieldsLength}),#end#set($index = $index + 1)#end                ],                columns : [//导出哪些列，可以自己酌情增删#set($index = 1)#foreach($resutlField in ${viewInfo.getResultFields()})					{name : "$resutlField.fieldName",label:"${viewInfo.getResultFieldDisplayName($resutlField)}"}#if($index < ${viewInfo.resultFieldsLength}),#end#set($index = $index + 1)#end                ]            },#end    		serializeGridData:function(postData){//添加查询条件值    			var obj = biz.utils.serializeObject("#${viewInfo.formId}");//示例中心搜索"biz.utils方法详解"查看方法说明    			${dot}.extend(true,obj,postData);//合并查询条件值与grid的默认传递参数    			return obj;    		}    	});    }	function query(){		${viewInfo.getlowerFirstEntityName()}Grid.setGridParam({"page":"1"});		${viewInfo.getlowerFirstEntityName()}Grid.trigger('reloadGrid');	}#if(${viewInfo.hasExport()})		//导出Excel	function excelExport(){		${viewInfo.getEntityName(true)}Grid.excelExport(biz.utils.serializeObject("#${viewInfo.formId}"));	}	#end#if(${viewInfo.hasAddOrEdit()})			function add(){		window.location="${viewInfo.getlowerFirstEntityName()}/add";	}		function edit(rowid){		rowid = ${viewInfo.getlowerFirstEntityName()}Grid.getGridParam("selarrrow");		if(rowid == null || rowid.length == 0){			showInfo("<fmt:message key='grid.edit.chooseColAlert'/>",3000);			return ;		}else if(rowid.length > 1){			showInfo("<fmt:message key='grid.edit.onlyOne'/>",3000);			return ;		}		var id = ${viewInfo.getlowerFirstEntityName()}Grid.getCell(rowid[0],"$viewInfo.pkName");		window.location="${viewInfo.getlowerFirstEntityName()}/edit/" + id;	}#end#if(${viewInfo.hasShow()})		function view(){		var rowid = ${viewInfo.getEntityName(true)}Grid.getGridParam("selarrrow");		if(rowid == null || rowid.length == 0){			showInfo("<fmt:message key='grid.view.chooseColAlert'/>",3000);			return ;		}else if(rowid.length > 1){			showInfo("<fmt:message key='grid.view.onlyOne'/>",3000);			return ;		}		var id = ${viewInfo.getEntityName(true)}Grid.getCell(rowid[0],"$viewInfo.pkName");		window.location="${viewInfo.getEntityName(true)}/show?id=" + id;	}#end		function batchDelete(rowid){		var rowid = ${viewInfo.getlowerFirstEntityName()}Grid.getGridParam('selarrrow');		if(rowid == null || rowid.length == 0){			showInfo("<fmt:message key='grid.delete.chooseColAlert'/>",3000);			return ;		}		new biz.alert({type:"confirm",message:I18N.msg_del_confirm,			title:I18N.promp,callback:function(result){	    		if (!result) {	    			return;	    		}				var ids="";				for(var i=0; i < rowid.length;i++){					var id = ${viewInfo.getlowerFirstEntityName()}Grid.getCell(rowid[i],'$viewInfo.pkName');					if(i>0){						ids +=',';					}					ids += id;				}				window.location="${viewInfo.getlowerFirstEntityName()}/delete/" + ids;			}		});	}	#foreach( $queryField in $viewInfo.getQueryFields())#set($fieldJS = $viewInfo.getFieldTagScript($queryField))#if($fieldJS != "")${fieldJS}#end#end